<div (click)="scrollUp()"class="position-fixed bottom-0 end-0 m-3" style="font-size:5rem">
	<i class="pe-auto bi bi-arrow-up-square"></i>
</div>
<app-profileheader [profileInformation]="profileHeader" profileType="job-post"></app-profileheader>
<div class="container">
	<div class="card rounded">
		<div class="card-body p-4">
			<div class="d-flex justify-content-between border-bottom pb-4">
				<div class="fs-1" style="padding-right:2.5rem">{{profile.JobName}}</div>
				<ng-container *ngIf="profile.TimeFrame === 'Part-Time'; then partTimeFlag; else fullTimeFlag"></ng-container>
				<ng-template #partTimeFlag>
					<div class="fs-1 ms-3" style="margin-left:2.5rem !important">
						<ng-container *ngIf="profile.Urgency; then urgentFlag; else notUrgentFlag"></ng-container>
						<ng-template #urgentFlag>
							<span class="badge bg-secondary">ทำงานวันที่ {{profile.DateOfJob}}</span>
						</ng-template>
						<ng-template #notUrgentFlag>
							<span class="badge text-dark" style="background: #a2e3d9">Part-Time</span>
						</ng-template>
					</div>
				</ng-template>
				<ng-template #fullTimeFlag>
					<div class="fs-1 ms-3" style="margin-left:2.5rem !important">
						<ng-container *ngIf="profile.Urgency; then urgentFlag; else notUrgentFlag"></ng-container>
						<ng-template #urgentFlag>
							<span class="badge bg-secondary">ทำงานวันที่ {{profile.DateOfJob}}</span>
						</ng-template>
						<ng-template #notUrgentFlag>
							<span class="badge text-dark" style="background:#7fcae6">Full-Time</span>
						</ng-template>
					</div>
				</ng-template>
			</div>
			<div class="mx-3 mb-3 fs-4">
				<div class="row">
					<div class="col-6 border-end pt-4">
						<div *ngIf="profile.JobType === 'ร้านยาแบรนด์'" class="row pb-3">
							<div class="col-5">
								<b>สาขา</b>
							</div>
							<div class="col" *ngIf="profile.JobType === 'ร้านยาแบรนด์'">{{profile.Franchise}}</div>
						</div>
						<div class="row pb-3">
							<div class="col-5">
								<i class="bi bi-clock me-2"></i><b>เวลาปฏิบัติงาน</b>
							</div>
							<div class="col">
								<div>{{profile.Duration}} น.</div>
							</div>
						</div>
						<div class="row pb-3" *ngIf="profile.TimeFrame == 'Full-Time'">
							<div class="col-5">
								<i class="bi bi-currency-bitcoin me-2"></i><b>ค่าตอบแทน</b>
							</div>
							<div class="col">
								<div>{{profile.Salary.Amount}} บาท/เดือน</div>
							</div>
						</div>
						<div class="row pb-3" *ngIf="profile.TimeFrame == 'Part-Time'">
							<div class="col-5">
								<i class="bi bi-currency-bitcoin me-2"></i><b>ค่าตอบแทน</b>
							</div>
							<div class="col">
								<div>{{profile.Salary.Amount}} บาท/ชม</div>
							</div>
						</div>
						<div *ngIf="profile.BTS.Near"  class="pb-3 row">
							<div class="col-5">
								<i class="bi bi-train-front me-2"></i> <b>BTS</b>
							</div>
							<div class="col"> {{profile.BTS.Station}}</div>
						</div>
						<div *ngIf="profile.ARL.Near"  class="pb-3 row">
							<div class="col-5">
								<i class="bi bi-train-front me-2"></i> <b>ARL</b>
							</div>
							<div class="col"> {{profile.ARL.Station}}</div>
						</div>
						<div class="pb-3 row" *ngIf="profile.OnlineInterview">
							<div class="col-5">
								<i class="bi bi-display me-2"></i><b>สัมภาษณ์ออนไลน์</b>
							</div>
						</div>
					</div>
					<div class="col-6 pt-4" style="padding-left:2.75rem">
						<div class="row pb-3">
							<div class="col-5">
								<i class="bi bi-people me-2"></i><b>รับสมัคร</b>
							</div>
							<div class="col">{{profile.Amount}} ตำแหน่ง</div>
						</div>
						<div class="row pb-3">
							<div class="col-5">
								<i class="bi bi-geo-alt me-2"></i><b>พื้นที่</b>
							</div>
							<div class="col"> {{profile.Location.Section}}, {{profile.Location.Province}}</div>
						</div>
						<div *ngIf="profile.MRT.Near"  class="pb-3 row">
							<div class="col-5">
								<i class="bi bi-train-front me-2"></i> <b>MRT</b>
							</div>
							<div class="col"> {{profile.MRT.Station}}</div>
						</div>
						<div *ngIf="profile.SRT.Near" class="pb-3 row">
							<div class="col-5">
								<i class="bi bi-train-front me-2"></i> <b>SRT</b>
							</div>
							<div class="col"> {{profile.SRT.Station}}</div>
						</div>

						<!-- <div class="d-flex flex-row" class="d-flex flex-row">
							<b>แขวง:</b>
							<div class="ms-2">{{profile.Location.District}}</div>
						</div> -->
						<!-- <div class="d-flex flex-row"> -->
							<!-- <b>เขต:</b> -->
							<!-- <div> {{profile.Location.Section}}, {{profile.Location.Province}}</div> -->
						<!-- </div> -->
						<!-- <div class="d-flex flex-row">
							<b>จังหวัด:</b>
							<div class="ms-2"> </div>
						</div> -->
						<div class="d-flex flex-row" *ngIf="profile.WorkFromHome">
							<i class="bi bi-house me-2"></i><b>Work from home</b>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>
	<div class="mt-3 d-flex justify-content-between">
		<div>
			<p class="lead"> อัพเดทล่าสุด {{profile.dateUpdated}} </p>
		</div>
		<div class="d-flex justify-content-start">
			<button (click)="toggleBookmark()" type="button" class="btn">
				<h1>
					<ng-container *ngIf="bookmarkLoadingFlag; then loading; else notLoading"></ng-container>
					<ng-template #loading>
						<div>
						<div style="text-align:center">
							<div class="spinner-border text-primary" role="status">
							<span class="visually-hidden">Loading...</span>
							</div>
						</div>
						</div>
					</ng-template>
					<ng-template #notLoading>
						<ng-container *ngIf="bookmarkFlag$ | async; then red; else black"></ng-container>
						<ng-template #black>
							<i class="bi bi-bookmark"></i>
							
						</ng-template>
						<ng-template #red>
							<i style="color:red" class="bi bi-bookmark-fill"></i>
						</ng-template>
					</ng-template>
				</h1>
			</button>
			<button type="button" class="btn me-3">
				<h1>
					<i class="bi bi-share"></i>
				</h1>
			</button>
			<ng-container *ngIf="requestFlag$ | async; then requestButton; else alreadyRequest"></ng-container>
			<ng-template #alreadyRequest>
				<button (click)="requestJob()" class="btn text-center my-2 px-5" type="button" style="background-color:#7fd858">
					<div class="fs-5">รับงาน</div>
				</button>
			</ng-template>
			<ng-template #requestButton>
				<button class="btn btn-warning text-center my-2 px-5" type="button">
					<div class="fs-5">รอ confirm</div>
				</button>
			</ng-template>
		</div>
	</div>
	<div class="my-5" *ngIf="urgentJobs.length !== 0">
		<h2 class="my-5">งานด่วนอื่นๆของผู้ประกอบการนี้</h2>
		<!-- <ng-container *ngIf="urgentJobs$ | async; then loadingUrgentJobs; else notLoadingUrgentJobs"></ng-container>
		<ng-template #loadingUrgentJobs>
			<div>
			<div style="text-align:center">
				<div class="spinner-border text-primary" role="status">
				<span class="visually-hidden">Loading...</span>
				</div>
			</div>
			</div>
		</ng-template>
		
		<ng-template #notLoadingUrgentJobs> -->
			<swiper
			[navigation]="true"
			[slidesPerView]="4.5"
			[spaceBetween]="25"
			[pagination]="true"
			style="margin-top: 3em; text-align: center"
			>
			<ng-template swiperSlide *ngFor="let item of urgentJobs">
				<app-job-post-small-card 
					[urgentFlag]="item.Urgency" 
					[fullTimeFlag]="item.TimeFrame === 'Full-Time'?true:false"
					[content]="item">
				</app-job-post-small-card>
			</ng-template>
			</swiper>
		<!-- </ng-template> -->
	</div>
	<div class="card rounded">
		<div class="card-body p-4">
			<div class="my-5 mt-3">
				<h2>หน้าที่ความรับผิดชอบ</h2>
				<div class="fs-4" [innerHtml]="profile.JobDetails"></div>
				<ng-container *ngIf="profile.Urgency === false">
					<h2 class="my-5">คุณสมบัติผู้สมัคร</h2>
						<div class="fs-4" [innerHtml]="profile.qualityApplicants"></div>
					<h2 class="my-5">สวัสดิการ</h2>
						<div class="fs-4" [innerHtml]="profile.jobBenefits"></div>
					<h2 class="my-5">วิธีสมัครงาน</h2>
						<div class="fs-4" [innerHtml]="profile.applyInstructions"></div>
				</ng-container>
			</div>
			<div class="my-5 mb-3">
				<h2 class="my-5">ช่องทางติดต่อ</h2>
				<div class="gridContact fs-4">
					<span>
						<b>โทร: </b>
					</span>
					<span class="ms-2">{{profile.Contacts.phone}}</span>
					<span>
						<b>Email: </b>
					</span>
					<span class="ms-2">{{profile.Contacts.email}}</span>
					<span>
						<b>Line: </b>
					</span>
					<span class="ms-2">{{profile.Contacts.line}}</span>
					<span>
						<b>Facebook: </b>
					</span>
					<span class="ms-2">{{profile.Contacts.facebook}}</span>
				</div>
			</div>
		</div>
	</div>
	<div class="card rounded mt-5">
		<div class="card-body px-4">
			<div class="my-3">
				<h2>สถานที่ปฏิบัติการ/วิธีเดินทาง</h2>
				<div class="fs-4 d-flex justify-content-between">
					<div class=" fs-4" [innerHtml]="profile.TravelInstructions"></div>
				</div>
				<div class="h2">
					<div class="mt-5 mb-3">
						<ul class="nav nav-underline" id="myTab" role="tablist">
							<li class="nav-item" role="presentation">
								<button class="nav-link active" id="home-tab" data-bs-toggle="tab" data-bs-target="#home" type="button" role="tab" aria-controls="home" aria-selected="true">แผนที่ออนไลน์</button>
							</li>
							<li class="nav-item" role="presentation">
								<button class="nav-link" id="profile-tab" data-bs-toggle="tab" data-bs-target="#profile" type="button" role="tab" aria-controls="profile" aria-selected="false">แผนที่ภาพ</button>
							</li>
						</ul>
					</div>
						
					<!-- Tab panes -->
					<div class="tab-content">
						<div class="tab-pane fade show active" id="home" role="tabpanel" aria-labelledby="home-tab" tabindex="0">
							<div style="text-align:center" class="my-5">
								<img src="assets/onlineMap.png" class="w-100">
							</div>
						</div>
						<div class="tab-pane fade" id="profile" role="tabpanel" aria-labelledby="profile-tab" tabindex="0">							
							<div style="text-align:center" class="my-5">
								<img src="assets/map.png" class="w-100">
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>
</div>